Feature: About Sample # features/about.feature:6

  Scenario: Transaction Processing                           # features/about.feature:8
    Given Sample Database                                    # features/steps/about.py:8
    When Transactions are submitted                          # features/steps/about.py:12
    Then Enforce business policies with Logic (rules + code) # features/steps/about.py:16

Feature: Patient Testing # features/medai.feature:1

  Scenario: Validate Recommendations              # features/medai.feature:2
    Given Existing Patients Readings              # features/steps/medai.py:9
    When Blood Sugar History is given             # features/steps/medai.py:17
    Then Recommendations should match prior entry # features/steps/medai.py:46
      Traceback (most recent call last):
        File "/Users/tylerband/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/venv/lib/python3.12/site-packages/behave/model.py", line 1329, in run
          match.run(runner.context)
        File "/Users/tylerband/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/venv/lib/python3.12/site-packages/behave/matchers.py", line 98, in run
          self.func(context, *args, **kwargs)
        File "features/steps/medai.py", line 57, in step_impl
          assert len(medications['data']) == len(recommendations['data'])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      AssertionError
      
      Captured stdout:
      {'data': {'attributes': {'S_CheckSum': '-2434940507863639877', 'age': 88.0, 'birth_date': '1937-04-11', 'cad': 0, 'ckd': None, 'created_date': '2025-04-11 14:40:04.153251', 'creatine_mg_dl': 0.8, 'duration': 60, 'hba1c': 6.9, 'height': 67, 'hld': 1, 'medical_record_number': 'MRN9', 'name': 'Patient-9', 'patient_sex': 'M', 'weight': 135}, 'id': '521', 'links': {'self': '/api/Patient/521/'}, 'relationships': {'PatientLabList': {'data': [], 'links': {'self': '/api/Patient/521/PatientLabList'}}, 'PatientMedicationList': {'data': [], 'links': {'self': '/api/Patient/521/PatientMedicationList'}}, 'ReadingHistoryList': {'data': [], 'links': {'self': '/api/Patient/521/ReadingHistoryList'}}, 'ReadingList': {'data': [], 'links': {'self': '/api/Patient/521/ReadingList'}}, 'RecommendationList': {'data': [], 'links': {'self': '/api/Patient/521/RecommendationList'}}}, 'type': 'Patient'}, 'included': [], 'jsonapi': {'version': '1.0'}, 'links': {'self': '/api/Patient/521/'}, 'meta': {'count': 1, 'instance_meta': {}, 'limit': 250, 'total': 1}}
      Patient: {'data': {'attributes': {'S_CheckSum': '-2434940507863639877', 'age': 88.0, 'birth_date': '1937-04-11', 'cad': 0, 'ckd': None, 'created_date': '2025-04-11 14:40:04.153251', 'creatine_mg_dl': 0.8, 'duration': 60, 'hba1c': 6.9, 'height': 67, 'hld': 1, 'medical_record_number': 'MRN9', 'name': 'Patient-9', 'patient_sex': 'M', 'weight': 135}, 'id': '521', 'links': {'self': '/api/Patient/521/'}, 'relationships': {'PatientLabList': {'data': [], 'links': {'self': '/api/Patient/521/PatientLabList'}}, 'PatientMedicationList': {'data': [], 'links': {'self': '/api/Patient/521/PatientMedicationList'}}, 'ReadingHistoryList': {'data': [], 'links': {'self': '/api/Patient/521/ReadingHistoryList'}}, 'ReadingList': {'data': [], 'links': {'self': '/api/Patient/521/ReadingList'}}, 'RecommendationList': {'data': [], 'links': {'self': '/api/Patient/521/RecommendationList'}}}, 'type': 'Patient'}, 'included': [], 'jsonapi': {'version': '1.0'}, 'links': {'self': '/api/Patient/521/'}, 'meta': {'count': 1, 'instance_meta': {}, 'limit': 250, 'total': 1}}
      {'data': [{'attributes': {'bedtime': 175.0, 'breakfast': 175.0, 'dinner': 160.0, 'lunch': 120.0, 'notes_for_day': None, 'patient_id': 521, 'reading_date': '2025-04-11'}, 'id': '69', 'links': {'self': '/api/ReadingHistory/69/'}, 'relationships': {'patient': {'data': None, 'links': {'self': '/api/ReadingHistory/69/patient'}}}, 'type': 'ReadingHistory'}, {'attributes': {'bedtime': 175.0, 'breakfast': 175.0, 'dinner': 160.0, 'lunch': 120.0, 'notes_for_day': None, 'patient_id': 521, 'reading_date': '2025-04-12'}, 'id': '78', 'links': {'self': '/api/ReadingHistory/78/'}, 'relationships': {'patient': {'data': None, 'links': {'self': '/api/ReadingHistory/78/patient'}}}, 'type': 'ReadingHistory'}, {'attributes': {'bedtime': 175.0, 'breakfast': 175.0, 'dinner': 160.0, 'lunch': 120.0, 'notes_for_day': 'BeHave Test', 'patient_id': 521, 'reading_date': '2025-05-11'}, 'id': '84', 'links': {'self': '/api/ReadingHistory/84/'}, 'relationships': {'patient': {'data': None, 'links': {'self': '/api/ReadingHistory/84/patient'}}}, 'type': 'ReadingHistory'}, {'attributes': {'bedtime': 175.0, 'breakfast': 175.0, 'dinner': 160.0, 'lunch': 120.0, 'notes_for_day': 'BeHave Test', 'patient_id': 521, 'reading_date': '2025-05-11'}, 'id': '85', 'links': {'self': '/api/ReadingHistory/85/'}, 'relationships': {'patient': {'data': None, 'links': {'self': '/api/ReadingHistory/85/patient'}}}, 'type': 'ReadingHistory'}, {'attributes': {'bedtime': 175.0, 'breakfast': 175.0, 'dinner': 160.0, 'lunch': 120.0, 'notes_for_day': 'BeHave Test', 'patient_id': 521, 'reading_date': '2025-05-11'}, 'id': '86', 'links': {'self': '/api/ReadingHistory/86/'}, 'relationships': {'patient': {'data': None, 'links': {'self': '/api/ReadingHistory/86/patient'}}}, 'type': 'ReadingHistory'}, {'attributes': {'bedtime': 175.0, 'breakfast': 175.0, 'dinner': 160.0, 'lunch': 120.0, 'notes_for_day': 'BeHave Test', 'patient_id': 521, 'reading_date': '2025-05-11'}, 'id': '87', 'links': {'self': '/api/ReadingHistory/87/'}, 'relationships': {'patient': {'data': None, 'links': {'self': '/api/ReadingHistory/87/patient'}}}, 'type': 'ReadingHistory'}, {'attributes': {'bedtime': 175.0, 'breakfast': 175.0, 'dinner': 160.0, 'lunch': 120.0, 'notes_for_day': 'BeHave Test', 'patient_id': 521, 'reading_date': '2025-05-11'}, 'id': '88', 'links': {'self': '/api/ReadingHistory/88/'}, 'relationships': {'patient': {'data': None, 'links': {'self': '/api/ReadingHistory/88/patient'}}}, 'type': 'ReadingHistory'}], 'included': [], 'jsonapi': {'version': '1.0'}, 'links': {'self': '/api/ReadingHistory/?filter[patient_id]=521&page[offset]=0&page[limit]=250'}, 'meta': {'count': 7, 'limit': 250, 'total': 7}}
      {'data': {'attributes': {'bedtime': 175.0, 'breakfast': 175.0, 'dinner': 160.0, 'lunch': 120.0, 'notes_for_day': 'BeHave Test', 'patient_id': 521, 'reading_date': '2025-05-11'}, 'id': '89', 'links': {'self': '/api/ReadingHistory/89/'}, 'relationships': {'patient': {'data': None, 'links': {'self': '/api/ReadingHistory/89/patient'}}}, 'type': 'ReadingHistory'}, 'included': [], 'jsonapi': {'version': '1.0'}, 'links': {'related': '/api/ReadingHistory/?', 'self': '/api/ReadingHistory/89/'}, 'meta': {'count': 1, 'instance_meta': {}, 'limit': 250, 'total': 1}}
      {'data': [], 'included': [], 'jsonapi': {'version': '1.0'}, 'links': {'self': '/api/Recommendation/?filter[reading_date]=2025-05-11&filter[patient_id]=521&page[offset]=0&page[limit]=250'}, 'meta': {'count': 0, 'limit': 250, 'total': 0}}
      {'data': [{'attributes': {'dosage': 5.0, 'dosage_unit': 'mg', 'drug_id': 3, 'patient_id': 521}, 'id': '318', 'links': {'self': '/api/PatientMedication/318/'}, 'relationships': {'drug': {'data': None, 'links': {'self': '/api/PatientMedication/318/drug'}}, 'drug_unit': {'data': None, 'links': {'self': '/api/PatientMedication/318/drug_unit'}}, 'patient': {'data': None, 'links': {'self': '/api/PatientMedication/318/patient'}}}, 'type': 'PatientMedication'}, {'attributes': {'dosage': 10.0, 'dosage_unit': 'mg', 'drug_id': 6, 'patient_id': 521}, 'id': '319', 'links': {'self': '/api/PatientMedication/319/'}, 'relationships': {'drug': {'data': None, 'links': {'self': '/api/PatientMedication/319/drug'}}, 'drug_unit': {'data': None, 'links': {'self': '/api/PatientMedication/319/drug_unit'}}, 'patient': {'data': None, 'links': {'self': '/api/PatientMedication/319/patient'}}}, 'type': 'PatientMedication'}], 'included': [], 'jsonapi': {'version': '1.0'}, 'links': {'self': '/api/PatientMedication/?filter[patient_id]=521&page[offset]=0&page[limit]=250'}, 'meta': {'count': 2, 'limit': 250, 'total': 2}}


&nbsp;&nbsp;
/Users/tylerband/medai+/medai/test/api_logic_server_behave/behave_run.py completed at April 11, 2025 14:21:53